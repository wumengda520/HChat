<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>在线聊天</title>
</head>
<body>
    <input type="text" id="message">
    <input type="button" value="点击发送" onclick="hchat.chat()">



    <div>接收消息:</div>
    <p id="server-msg" style="background-color: red;"></p>
    <script>
        var hchat = null;
        if (window.WebSocket) {
            hchat = new WebSocket("ws://127.0.0.1:9090/ws");
            hchat.onopen = function () {
                console.log("建立连接");

            }
            hchat.onclose = function (ev) {
                console.log("连接关闭");
            };
            hchat.onerror = function (ev) {
                console.log("发生错误")
            };
            hchat.onmessage = function (e) {
                console.log("接收到消息" + e.data);
                var resMsg = document.getElementById("server-msg");

                resMsg.innerHTML = resMsg.innerHTML + "<br/>" + e.data;
            };

    } else {
        alert("浏览器不支持websocket");
            console.log("git");
    }
    hchat.chat = function () {
        var meg = document.getElementById("message");
        hchat.send(meg.value);

    };

</script>
<input>
</body>
</html>